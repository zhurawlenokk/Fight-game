<template>    <div class="game">        <Player            v-for="player in players"            :player="player"            @attackEnemyEvent="updateCharacters"        />    </div>  	<div		v-show="winner.showWinner"		class="overlay"	>		<ResultPopup			:winnerName="winner.player.characterName"			:winnerImage="winner.player.characterImg"		/>	</div></template><script setup lang="ts">    import { getRealObject } from '../utils.js';    import {onBeforeUpdate, onMounted, ref} from 'vue';    import ApiFetch from '../components/game/ApiFetch.ts';    import Player from '../components/game/player/Player.vue';    import PlayerCore from '../components/game/player/PlayerCore.ts';    import ResultPopup from '../components/game/popups/ResultPopup.vue'    const players: ref<PlayerCore[]> = ref([]);    let winner = ref({		showWinner: false,		player: {}	});	onMounted(() => {	  startSetCharacters();	});	onBeforeUpdate(() => {		const winnerInfo = players.value.find(item => item.isWinner);		if (winnerInfo) {			winner.value.showWinner = true;			winner.value.player = winnerInfo.characterInfo;		}	});	function startSetCharacters()	{		const randomCharacters = new ApiFetch().getCharactersList();		if (randomCharacters) {			let playerCharacters = [];			randomCharacters.forEach(function (randomCharacter, index) {				playerCharacters.push(new PlayerCore(randomCharacter));			});			players.value = playerCharacters;		}	}	function updateCharacters(playerId: number, damage: number)	{		let characterList = getRealObject(players);		const selectActionPlayerIndex = characterList.findIndex(item => item.playerId === playerId);		const selectDamagedPlayerIndex = characterList.findIndex(item => item.playerId !== playerId);		characterList[selectActionPlayerIndex].playerSetAttack();		characterList[selectDamagedPlayerIndex].playerGetDamage(damage, <PlayerCore>characterList[selectActionPlayerIndex]);		players.value = characterList;	}</script><style lang="scss" scoped>  .game {    display: flex;    justify-content: space-between;    margin-top: 50px;  }  .overlay {	width: 100%;	height: 100%;	position: absolute;	top: 0;	left: 0;	z-index: 99;	background: rgba(0, 0, 0, 0.8);	display: flex;	align-items: center;	justify-content: center;  }</style>